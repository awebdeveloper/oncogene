'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Oncogene=function(){function a(b){_classCallCheck(this,a),this.checkOptions(b),this.handleOptions(b),this.root.classList.add(this.classes.common.root),this.nextStep()}return _createClass(a,[{key:'nextStep',value:function nextStep(){return this.nextStepInx>=this.steps.length?this.showResults():void this.renderStep(this.steps[this.nextStepInx++])}},{key:'renderStep',value:function renderStep(b){function d(j){var k=j.currentTarget.dataset.inx,l=b.variants[k].value;b.key&&(this.config[b.key]=l),b.callback&&(this.config=b.callback(this.config,l)),this.nextStep()}var f=document.createDocumentFragment(),g=this.createNode(this.classes.common.hint),h=this.createNode(this.classes.variants.root);b.variants.forEach(function(j,k){var l=this.createNode(this.classes.variants.item),m=this.createNode(this.classes.variants.hint),n=this.createNode(this.classes.variants.code);m.innerHTML=j.hint||'',n.textContent=j.code,l.dataset.inx=k,l.appendChild(m),l.appendChild(n),l.addEventListener('click',d.bind(this)),h.appendChild(l)}.bind(this)),g.innerHTML=b.hint||'',f.appendChild(g),f.appendChild(h),this.clearRoot(),this.root.appendChild(f)}},{key:'showResults',value:function showResults(){this.renderResult()}},{key:'renderResult',value:function renderResult(){var b=this.createNode(this.classes.result.root),c=this.createNode(this.classes.result.hint),d=this.createNode(this.classes.result.config);b.appendChild(c),b.appendChild(d),c.innerHTML=this.result.hint||'',d.textContent=this.result.callback(this.config),this.clearRoot(),this.root.appendChild(b)}},{key:'createNode',value:function createNode(b){var c=document.createElement('div');return c.className=b,c}},{key:'clearRoot',value:function clearRoot(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild)}},{key:'checkOptions',value:function checkOptions(b){var f=function isObject(h){return h===Object(h)},g=function isUndefined(h){return'undefined'==typeof h};if(!b)throw new Error('You should specify options');if(['selector','steps'].forEach(function(h){if(!b.hasOwnProperty(h))throw new Error('You should specify '+h)}),['result','classes'].forEach(function(h){if(!g(b[h])&&!f(b[h]))throw new Error('options.'+h+' should be an object')}),!(b.steps instanceof Array))throw new Error('Steps should be an array')}},{key:'handleOptions',value:function handleOptions(b){var c=b.classes||{};if(this.root=document.querySelector(b.selector),this.steps=b.steps,this.config=b.config||{},this.result=Object.assign({callback:function callback(d){return JSON.stringify(d,0,4)}},b.result),this.classes={common:Object.assign({root:'oncogene',hint:'oncogene__hint'},c.common),variants:Object.assign({root:'oncogene-variants',hint:'oncogene-variants__hint',item:'oncogene-variants__item',code:'oncogene-variants__code'},c.variants),result:Object.assign({root:'oncogene-result',hint:'oncogene-result__hint',config:'oncogene-result__config'},c.result)},this.nextStepInx=0,!this.root)throw new Error('Can\'t find element by selector')}}]),a}();